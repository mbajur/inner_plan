<turbo-frame id="<%= dom_id(@list, :header) %>">
  <header>
    <%= render(InnerPlan::BreadcrumbsComponent.new) do |c| %>
      <% c.with_breadcrumb do %>
        <%= link_to 'Home', root_path, class: 'text-reset', data: { turbo_frame: :_top } %>
      <% end %>

      <% c.with_breadcrumb(active: true) { "List ##{@list.id}" } %>
    <% end %>

    <div class="row">
      <div class="col-12">
        <h1 class="h2">
          <%= link_to @list.title, edit_list_path(@list), class: 'text-reset text-decoration-none' %>

          <small class="fs-6 text-body-tertiary">
            <%= @list.tasks.completed.count %>/<%= @list.tasks.count %>
          </small>
        </h1>
      </div>
    </div>

    <%= render(InnerPlan::ProgressBarSeparatorComponent.new(completed: @list.tasks.completed.count, total: @list.tasks.count)) %>
  </header>

  <div class="mb-4 mt-3">
    <%= @list.description %>
  </div>
</turbo-frame>

<div data-controller="tasks-tree">
  <div data-tasks-tree-target="groupsContainer">
    <% groups = @list.groups.ordered_by_position %>
    <% groups.each do |group| %>
      <%= render partial: 'inner_plan/groups/group', locals: { group: group, context: :lists_show } %>
    <% end %>
  </div>
</div>

<div class="mt-3">
  <%= render partial: 'inner_plan/tasks/completed_tasks', locals: { list: @list, context: :lists_show } %>
</div>
