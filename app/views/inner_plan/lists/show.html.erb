<header class="mb-5">
  <nav aria-label="breadcrumb" style="--bs-breadcrumb-divider: 'â€º';" >
    <ol class="breadcrumb justify-content-center mb-0">
      <li class="breadcrumb-item text-body-tertiary"><a href="<%= root_path %>" class="text-reset">Home</a></li>
      <li class="breadcrumb-item active text-body-tertiary" aria-current="page">List #<%= @list.id %></li>
    </ol>
  </nav>

  <div class="row justify-content-center">
    <div class="col-6">
      <h1 class="h2 text-center">
        <%= @list.title %>

        <small class="fs-6 text-body-tertiary">
          <%= @list.tasks.completed.count %>/<%= @list.tasks.count %>
        </small>
      </h1>
    </div>
  </div>

  <div class="progress mt-2" role="progressbar" style="height: 2px;" aria-label="Basic example" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
    <div class="progress-bar" style="width: <%= percent(@list.tasks.completed.count, @list.tasks.count) %>%"></div>
  </div>
</header>

<div data-controller="tasks-tree">
  <div data-tasks-tree-target="groupsContainer">
    <% groups = @list.groups.ordered_by_position %>
    <% groups.each_with_index do |group, index| %>
      <%= render partial: 'inner_plan/groups/group',
                  locals: { group: group, show_new_task_form: index == groups.size - 1 } %>
    <% end %>
  </div>
</div>

<div class="mt-3">
  <%= render partial: 'inner_plan/tasks/completed_tasks', locals: { list: @list } %>
</div>
